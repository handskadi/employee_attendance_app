{% extends 'elements/dashboard_app.html' %}
{% block content %}

<style>
    group-fixer-right {
    margin-right: 10px;
}

.group-fixer-left {
    margin-left: 10px;
}

/* Style for sliders */
.noUi-connect {
    background: #007bff;
    /* Slider track color */
}

.noUi-horizontal .noUi-handle {
    background: #007bff;
    /* Slider handle color */
}

/* Style for tooltips */
.noUi-tooltip {
    background: #007bff;
    /* Tooltip background color */
    color: #fff;
    /* Tooltip text color */
    border: none;
    /* Remove tooltip border */
    border-radius: 4px;
    /* Add border radius to tooltip */
    padding: 8px;
    /* Add padding to tooltip */
    font-size: 14px;
    /* Adjust tooltip font size */
}

.noUi-tooltip::before,
.noUi-tooltip::after {
    display: none;
    /* Hide tooltip arrow */
}

.noUi-connect {
    background: #007bff !important;
}

.noUi-horizontal .noUi-handle {
    width: 28px;
    height: 28px;
    right: -17px;
    top: -9px !important;
}

.noUi-horizontal {
    height: 6px !important;
}

.noUi-horizontal .noUi-handle {
    width: 20px !important;
    height: 20px !important;
    right: -17px;
    top: -6px;
    border-radius: 50% !important;
}


.noUi-handle:after,
.noUi-handle:before {
    display: none !important;
}

.noUi-handle {
    box-shadow: none !important;
}
</style>


<!-- Divider between Sidebar and Content -->
<div class="b-example-divider b-example-vr"></div>

<!-- Content Section -->
<div class="flex-grow-1 p-3 overflow-auto">

  <!-- Breadcrumb -->
  <div class="container my-5">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb breadcrumb-chevron p-3 bg-body-tertiary rounded-3">
        <li class="breadcrumb-item">
          <a class="link-body-emphasis" href="/">
            <svg class="bi" width="16" height="16">
              <use xlink:href="#home"></use>
            </svg>
            <span class="visually-hidden">Home</span>
          </a>
        </li>
        <li class="breadcrumb-item">
          <a class="link-body-emphasis fw-semibold text-decoration-none" href="/dashboard">Dashboard</a>
        </li>
        <li class="breadcrumb-item active" aria-current="page"> Create New Employee
        </li>
      </ol>
    </nav>
  </div>


<div class="container" class="container" style="
max-width: 960px;
">
    <h2>Employee Attendance:</h2>
    <form action="/add_attendance" method="POST">
        {{ form.hidden_tag() }}
        <hr class="mb-4">
        <h4 class="mb-3">Track Attendance:</h4>
        <div class="row" style="
        padding-bottom: 20px;">
        <div class="col-sm-6">
            {{ form.employee.label(for="employee")}}
            {{ form.employee(id="employee", class="form-control")}}

            {% if form.employee.errors %}
            <ul>
                {% for error in form.employee.errors %}
                <li> {{ error }}</li>
                {% endfor %}
            </ul>
            {% endif %}
        </div>
        <div class="col-sm-6">
            {{ form.attendance_date.label(for="attendance_date")}}
            {{ form.attendance_date(id="attendance_date", class="form-control")}}

            {% if form.attendance_date.errors %}
            <ul>
                {% for error in form.attendance_date.errors %}
                <li> {{ error }}</li>
                {% endfor %}
            </ul>
            {% endif %}
        </div>
        </div>
        <div class="row">
            <div class="col-sm-6">
                <label for="day_shift_hours" style="
                padding-bottom: 50px;
            ">Day Shift Hours</label>
                <div id="day-shift-slider"></div>
                <input type="hidden" name="day_shift_hours" id="day_shift_hours">
            </div>

            <div class="col-sm-6">
                <label for="night_shift_hours" style="
                padding-bottom: 50px;
            ">Night Shift Hours</label>
                <div id="night-shift-slider"></div>
                <input type="hidden" name="night_shift_hours" id="night_shift_hours">
            </div>
        </div>
        <div class="form-group" style="
        padding-top: 40px;
    ">
            {{ form.comment.label(for="comment")}}
            {{ form.comment(id="comment", class="form-control")}}

            {% if form.comment.errors %}
            <ul>
                {% for error in form.comment.errors %}
                <li> {{ error }}</li>
                {% endfor %}
            </ul>
            {% endif %}
        </div>

        {{ form.submit(class="btn btn-dark mt-4")}}
    </form>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/14.6.3/nouislider.min.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/14.6.3/nouislider.min.css" rel="stylesheet">
<script>
    // Function to create a slider
    function createSlider(elementId, maxValue, inputId) {
        var slider = document.getElementById(elementId);
        noUiSlider.create(slider, {
            start: [document.getElementById(inputId).value], // Set initial value based on the input field
            connect: 'lower',
            step: 1,
            range: {
                'min': 0,
                'max': maxValue
            },
            tooltips: true, // Enable tooltips
            format: {
                to: function (value) {
                    return Math.round(value); // Round the value for display
                },
                from: function (value) {
                    return value; // No conversion needed from tooltip to value
                }
            }
        });

        // Update hidden input value when slider value changes
        slider.noUiSlider.on('update', function (values, handle) {
            document.getElementById(inputId).value = Math.round(values[handle]);
        });
    }

    // Create sliders for day_shift_hours and night_shift_hours
    createSlider('day-shift-slider', 8, 'day_shift_hours'); // Max value is 8 for day_shift_hours
    createSlider('night-shift-slider', 8, 'night_shift_hours'); // Max value is 8 for night_shift_hours

    // Set current date as the value for the attendance_date field
    window.addEventListener('DOMContentLoaded', function () {
        var today = new Date().toISOString().substr(0, 10);
        document.getElementById('attendance_date').value = today;
    });
</script>

<!-- Form  ENd-->
<hr class="my-4">
<div class="container">
  <footer class="py-3 my-4">
    <p class="text-center text-body-secondary">Â© 2024 MKweb, Inc</p>
  </footer>
</div>

</div>
</main>

{% endblock %}